import{s as m,j as e}from"./index-zDZ3Lj_p.js";import{r,L as n}from"./react-vendor-CTUriZ5h.js";import{A as x}from"./AdminLayout-CvWZnuk_.js";import{U as b}from"./users-4zMWxYqH.js";import{P as o}from"./package-ChDCFdB3.js";import{C as N}from"./clock-Dhxn45-3.js";import{T as v}from"./trending-up-9gPHMyOx.js";import{C as w}from"./check-circle-CyNeZd0p.js";import{X as y}from"./x-circle-D3f66Y07.js";import{S as E}from"./store-B-5iV_wL.js";import"./supabase-Bl4YWSQ9.js";import"./x-D4qrk5Qy.js";import"./createLucideIcon-CMjKDoEE.js";import"./menu-DP2azNEK.js";import"./shield-BNgLrtrc.js";import"./layout-dashboard-CqNl1jWq.js";import"./truck-CgEV9F53.js";import"./banknote-JI0QWWz-.js";import"./file-text-B3Ewreww.js";import"./home-9mW_oZwz.js";function H(){const[d,h]=r.useState([]),[l,p]=r.useState([]),[j,g]=r.useState(!0);r.useEffect(()=>{f()},[]);const f=async()=>{try{const[s,a]=await Promise.all([m.from("merchants").select("id, name, email"),m.from("exchanges").select("merchant_id, status")]);h(s.data||[]),p(a.data||[])}finally{g(!1)}},t={totalMerchants:d.length,totalExchanges:l.length,pendingExchanges:l.filter(s=>s.status==="pending").length,completedExchanges:l.filter(s=>s.status==="completed").length,validatedExchanges:l.filter(s=>["validated","preparing","in_transit","completed"].includes(s.status)).length,rejectedExchanges:l.filter(s=>s.status==="rejected").length},u=t.totalExchanges>0?Math.round(t.validatedExchanges/t.totalExchanges*100):0,c=d.map(s=>{const a=l.filter(i=>i.merchant_id===s.id);return{...s,exchangeCount:a.length,validatedCount:a.filter(i=>["validated","preparing","in_transit","completed"].includes(i.status)).length}}).sort((s,a)=>a.exchangeCount-s.exchangeCount);return j?e.jsx(x,{children:e.jsx("div",{className:"flex items-center justify-center h-96",children:e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-purple-600"})})}):e.jsx(x,{children:e.jsxs("div",{children:[e.jsxs("div",{className:"mb-8",children:[e.jsx("h1",{className:"text-2xl font-bold text-slate-900 mb-2",children:"Dashboard Administration"}),e.jsx("p",{className:"text-slate-600",children:"Vue d'ensemble de la plateforme"})]}),e.jsxs("div",{className:"grid md:grid-cols-2 lg:grid-cols-4 gap-6 mb-8",children:[e.jsx("div",{className:"bg-white rounded-xl shadow-sm border border-slate-200 p-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-slate-600 mb-1",children:"E-Commerçants"}),e.jsx("p",{className:"text-3xl font-bold text-slate-900",children:t.totalMerchants})]}),e.jsx("div",{className:"w-12 h-12 bg-purple-100 rounded-lg flex items-center justify-center",children:e.jsx(b,{className:"w-6 h-6 text-purple-600"})})]})}),e.jsx("div",{className:"bg-white rounded-xl shadow-sm border border-slate-200 p-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-slate-600 mb-1",children:"Total Échanges"}),e.jsx("p",{className:"text-3xl font-bold text-slate-900",children:t.totalExchanges})]}),e.jsx("div",{className:"w-12 h-12 bg-sky-100 rounded-lg flex items-center justify-center",children:e.jsx(o,{className:"w-6 h-6 text-sky-600"})})]})}),e.jsx("div",{className:"bg-white rounded-xl shadow-sm border border-slate-200 p-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-slate-600 mb-1",children:"En attente"}),e.jsx("p",{className:"text-3xl font-bold text-slate-900",children:t.pendingExchanges})]}),e.jsx("div",{className:"w-12 h-12 bg-amber-100 rounded-lg flex items-center justify-center",children:e.jsx(N,{className:"w-6 h-6 text-amber-600"})})]})}),e.jsx("div",{className:"bg-white rounded-xl shadow-sm border border-slate-200 p-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-slate-600 mb-1",children:"Taux de validation"}),e.jsxs("p",{className:"text-3xl font-bold text-slate-900",children:[u,"%"]})]}),e.jsx("div",{className:"w-12 h-12 bg-emerald-100 rounded-lg flex items-center justify-center",children:e.jsx(v,{className:"w-6 h-6 text-emerald-600"})})]})})]}),e.jsxs("div",{className:"grid md:grid-cols-2 gap-6 mb-8",children:[e.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-slate-200 p-6",children:[e.jsx("h3",{className:"text-lg font-semibold text-slate-900 mb-4",children:"Statut des échanges"}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(w,{className:"w-5 h-5 text-emerald-500"}),e.jsx("span",{className:"text-slate-600",children:"Validés"})]}),e.jsx("span",{className:"font-semibold text-slate-900",children:t.validatedExchanges})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(y,{className:"w-5 h-5 text-red-500"}),e.jsx("span",{className:"text-slate-600",children:"Rejetés"})]}),e.jsx("span",{className:"font-semibold text-slate-900",children:t.rejectedExchanges})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(o,{className:"w-5 h-5 text-emerald-500"}),e.jsx("span",{className:"text-slate-600",children:"Complétés"})]}),e.jsx("span",{className:"font-semibold text-slate-900",children:t.completedExchanges})]})]})]}),e.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-slate-200 p-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("h3",{className:"text-lg font-semibold text-slate-900",children:"Top E-Commerçants"}),e.jsx(n,{to:"/admin/merchants",className:"text-sm text-purple-600 hover:text-purple-700",children:"Voir tous"})]}),e.jsxs("div",{className:"space-y-3",children:[c.slice(0,5).map((s,a)=>e.jsxs(n,{to:`/admin/merchant/${s.id}`,className:"flex items-center justify-between p-3 rounded-lg hover:bg-slate-50 transition-colors",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-8 h-8 bg-purple-100 rounded-full flex items-center justify-center",children:e.jsx(E,{className:"w-4 h-4 text-purple-600"})}),e.jsxs("div",{children:[e.jsx("p",{className:"font-medium text-slate-900",children:s.name}),e.jsx("p",{className:"text-xs text-slate-500",children:s.email})]})]}),e.jsxs("div",{className:"text-right",children:[e.jsx("p",{className:"font-semibold text-slate-900",children:s.exchangeCount}),e.jsx("p",{className:"text-xs text-slate-500",children:"échanges"})]})]},s.id)),c.length===0&&e.jsx("p",{className:"text-slate-500 text-center py-4",children:"Aucun e-commerçant"})]})]})]}),e.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-slate-200 p-6",children:[e.jsx("h3",{className:"text-lg font-semibold text-slate-900 mb-4",children:"Actions rapides"}),e.jsxs("div",{className:"flex flex-wrap gap-4",children:[e.jsx(n,{to:"/admin/merchant/new",className:"px-4 py-2 bg-purple-600 text-white rounded-lg hover:bg-purple-700 transition-colors",children:"Ajouter un e-commerçant"}),e.jsx(n,{to:"/admin/merchants",className:"px-4 py-2 border border-slate-300 text-slate-700 rounded-lg hover:bg-slate-50 transition-colors",children:"Gérer les e-commerçants"})]})]})]})})}export{H as default};
