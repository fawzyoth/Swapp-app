import{s as c,j as e,S as y}from"./index-C-n_DeK3.js";import{h as L,u as F,r as l}from"./react-vendor-CTUriZ5h.js";import{A as M}from"./alert-triangle-1NuODUVJ.js";import{X as D}from"./x-circle-D3f66Y07.js";import{C as o}from"./check-circle-CyNeZd0p.js";import{C as m}from"./clock-Dhxn45-3.js";import{A as z}from"./arrow-left-CxjwE-xR.js";import{P as I}from"./package-ChDCFdB3.js";import{S as b}from"./send-DlqxrGT5.js";import{F as U}from"./file-text-B3Ewreww.js";import{C as $}from"./check-Cm21nyZb.js";import{X as q}from"./x-D4qrk5Qy.js";import{T as G}from"./truck-CgEV9F53.js";import{D as V}from"./dollar-sign-C401I3Os.js";import{C as W}from"./camera-BlqYlgM8.js";import{P as O}from"./printer-B3I1m1op.js";import{D as X}from"./download-BkxpqmAo.js";import{U as B}from"./user-DEx4Ce9L.js";import{P as H}from"./phone-BNQXnIac.js";import{M as J}from"./map-pin-DUtVdt2Q.js";import"./supabase-Bl4YWSQ9.js";import"./createLucideIcon-CMjKDoEE.js";const S={pending:{label:"En attente",color:"yellow",icon:m},accepted:{label:"Accepte",color:"green",icon:o},rejected:{label:"Refuse",color:"red",icon:D},problem:{label:"Probleme signale",color:"orange",icon:M}};function fe(){const{id:d}=L(),g=F(),[t,E]=l.useState(null),[i,T]=l.useState([]),[r,P]=l.useState(null),[x,f]=l.useState(""),[A,R]=l.useState(!0),[n,p]=l.useState("timeline");l.useEffect(()=>{j()},[d]);const j=async()=>{try{const{data:s}=await c.from("exchanges").select("*").eq("id",d).maybeSingle();if(s){if(E(s),s.delivery_person_id){const{data:w}=await c.from("delivery_persons").select("id, name, phone").eq("id",s.delivery_person_id).maybeSingle();P(w)}const{data:a}=await c.from("messages").select("*").eq("exchange_id",d).order("created_at",{ascending:!0});T(a||[])}}catch(s){console.error("Error fetching details:",s)}finally{R(!1)}},k=async s=>{if(s.preventDefault(),!!x.trim())try{await c.from("messages").insert({exchange_id:d,sender_type:"client",message:x}),f(""),j()}catch(a){console.error("Error sending message:",a)}},C=()=>{if(!t)return[];const a=["pending","validated","ready_for_pickup","in_transit","completed"].indexOf(t.status);return[{id:"submitted",label:"Demande soumise",description:"Votre demande d'echange a ete envoyee",status:"completed",date:t.created_at},{id:"validated",label:"Validee par le marchand",description:t.status==="rejected"?"Votre demande a ete refusee":"Le marchand a accepte votre echange",status:t.status==="rejected"?"error":a>=1?"completed":a===0?"current":"pending",date:a>=1?t.validated_at:void 0},{id:"pickup",label:"Ramassage programme",description:t.pickup_scheduled_date?`Prevu le ${new Date(t.pickup_scheduled_date).toLocaleDateString("fr-FR")}`:"En attente de programmation",status:a>=2?"completed":a===1?"current":"pending",date:t.pickup_scheduled_date},{id:"in_transit",label:"Livreur en route",description:r?`${r.name} est en chemin`:"Le livreur arrive bientot",status:a>=3?"completed":a===2?"current":"pending"},{id:"completed",label:"Echange effectue",description:"Votre echange est termine",status:t.status==="completed"?"completed":a===3?"current":"pending",date:t.completed_at}]},v=()=>{const s=S[t.return_product_status||"pending"],a=window.open("","","height=800,width=600");a&&(a.document.write(`
        <html>
        <head>
          <title>Manifeste d'Echange - ${t.exchange_code}</title>
          <style>
            * { margin: 0; padding: 0; box-sizing: border-box; }
            body { font-family: Arial, sans-serif; padding: 20px; max-width: 600px; margin: 0 auto; }
            .header { text-align: center; border-bottom: 3px solid #000; padding-bottom: 15px; margin-bottom: 20px; }
            .logo { font-size: 28px; font-weight: bold; letter-spacing: 3px; }
            .doc-title { font-size: 18px; margin-top: 10px; text-transform: uppercase; }
            .code { font-family: monospace; font-size: 20px; margin-top: 10px; }
            .section { margin-bottom: 20px; }
            .section-title { font-weight: bold; font-size: 14px; text-transform: uppercase; background: #f0f0f0; padding: 8px; margin-bottom: 10px; }
            .row { display: flex; justify-content: space-between; padding: 8px 0; border-bottom: 1px solid #eee; }
            .label { color: #666; }
            .value { font-weight: 500; }
            .status-box { text-align: center; padding: 20px; border: 3px solid; margin: 20px 0; }
            .status-box.accepted { border-color: #22c55e; background: #f0fdf4; }
            .status-box.rejected { border-color: #ef4444; background: #fef2f2; }
            .status-box.pending { border-color: #eab308; background: #fefce8; }
            .status-box.problem { border-color: #f97316; background: #fff7ed; }
            .status-label { font-size: 24px; font-weight: bold; text-transform: uppercase; }
            .footer { margin-top: 30px; padding-top: 20px; border-top: 2px solid #000; text-align: center; font-size: 12px; color: #666; }
            .qr-placeholder { width: 100px; height: 100px; border: 2px solid #000; margin: 20px auto; display: flex; align-items: center; justify-content: center; }
            .signatures { display: flex; justify-content: space-between; margin-top: 40px; }
            .signature-box { width: 45%; text-align: center; }
            .signature-line { border-top: 1px solid #000; margin-top: 50px; padding-top: 5px; font-size: 12px; }
          </style>
        </head>
        <body>
          <div class="header">
            <div class="logo">SWAPP</div>
            <div class="doc-title">Manifeste d'Echange</div>
            <div class="code">${t.exchange_code}</div>
          </div>

          <div class="section">
            <div class="section-title">Informations Client</div>
            <div class="row"><span class="label">Nom</span><span class="value">${t.client_name}</span></div>
            <div class="row"><span class="label">Telephone</span><span class="value">${t.client_phone}</span></div>
            <div class="row"><span class="label">Adresse</span><span class="value">${t.client_address||"Non fournie"}</span></div>
            <div class="row"><span class="label">Ville</span><span class="value">${t.client_city||""}</span></div>
          </div>

          <div class="section">
            <div class="section-title">Details de l'Echange</div>
            <div class="row"><span class="label">Produit</span><span class="value">${t.product_name||"Non specifie"}</span></div>
            <div class="row"><span class="label">Raison</span><span class="value">${t.reason}</span></div>
            <div class="row"><span class="label">Date de demande</span><span class="value">${new Date(t.created_at).toLocaleDateString("fr-FR")}</span></div>
          </div>

          <div class="section">
            <div class="section-title">Statut du Produit Retourne</div>
            <div class="status-box ${t.return_product_status||"pending"}">
              <div class="status-label">${s.label}</div>
              ${t.return_product_notes?`<p style="margin-top: 10px; font-size: 14px;">${t.return_product_notes}</p>`:""}
            </div>
          </div>

          <div class="section">
            <div class="section-title">Paiement</div>
            <div class="row"><span class="label">Montant</span><span class="value">${t.payment_amount>0?t.payment_amount+" TND":"GRATUIT"}</span></div>
            <div class="row"><span class="label">Statut</span><span class="value">${t.payment_status==="collected"?"Encaisse":t.payment_status==="free"?"Gratuit":"En attente"}</span></div>
          </div>

          ${r?`
          <div class="section">
            <div class="section-title">Livreur</div>
            <div class="row"><span class="label">Nom</span><span class="value">${r.name}</span></div>
            <div class="row"><span class="label">Telephone</span><span class="value">${r.phone}</span></div>
          </div>
          `:""}

          <div class="signatures">
            <div class="signature-box">
              <div class="signature-line">Signature Client</div>
            </div>
            <div class="signature-box">
              <div class="signature-line">Signature Livreur</div>
            </div>
          </div>

          <div class="footer">
            <p>SWAPP - Plateforme d'echange</p>
            <p>Genere le ${new Date().toLocaleDateString("fr-FR")} a ${new Date().toLocaleTimeString("fr-FR")}</p>
          </div>
        </body>
        </html>
      `),a.document.close(),setTimeout(()=>a.print(),500))};if(A)return e.jsx("div",{className:"min-h-screen bg-slate-50 flex items-center justify-center",children:e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-emerald-600"})});if(!t)return e.jsx("div",{className:"min-h-screen bg-slate-50 flex items-center justify-center",children:e.jsxs("div",{className:"text-center",children:[e.jsx("h2",{className:"text-2xl font-bold text-slate-900 mb-2",children:"Echange non trouve"}),e.jsx("button",{onClick:()=>g("/client/exchanges"),className:"px-6 py-2 bg-emerald-600 text-white rounded-lg hover:bg-emerald-700",children:"Retour aux echanges"})]})});const N=C(),u=S[t.return_product_status||"pending"],h=u.icon,_=["completed","delivery_verified","returned"].includes(t.status)||t.return_product_status;return e.jsx("div",{className:"min-h-screen bg-gradient-to-br from-slate-50 via-white to-emerald-50",children:e.jsxs("div",{className:"container mx-auto px-4 py-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsxs("button",{onClick:()=>g("/client/exchanges"),className:"flex items-center text-slate-600 hover:text-slate-900",children:[e.jsx(z,{className:"w-5 h-5 mr-2"}),"Retour"]}),e.jsxs("div",{className:"text-right",children:[e.jsx("p",{className:"text-sm text-slate-500",children:"Code d'echange"}),e.jsx("p",{className:"font-mono font-bold text-lg text-slate-900",children:t.exchange_code})]})]}),e.jsx("div",{className:"bg-white rounded-2xl shadow-sm border border-slate-200 p-4 mb-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:`w-12 h-12 rounded-full flex items-center justify-center ${t.status==="completed"?"bg-emerald-100":t.status==="rejected"?"bg-red-100":"bg-amber-100"}`,children:t.status==="completed"?e.jsx(o,{className:"w-6 h-6 text-emerald-600"}):t.status==="rejected"?e.jsx(D,{className:"w-6 h-6 text-red-600"}):e.jsx(m,{className:"w-6 h-6 text-amber-600"})}),e.jsxs("div",{children:[e.jsx("p",{className:"font-semibold text-slate-900",children:y[t.status]}),e.jsxs("p",{className:"text-sm text-slate-500",children:["Mis a jour le"," ",new Date(t.updated_at||t.created_at).toLocaleDateString("fr-FR")]})]})]}),e.jsx("span",{className:`px-4 py-2 rounded-full text-sm font-medium ${t.status==="completed"?"bg-emerald-100 text-emerald-700":t.status==="rejected"?"bg-red-100 text-red-700":"bg-amber-100 text-amber-700"}`,children:y[t.status]})]})}),e.jsxs("div",{className:"flex gap-2 mb-6 bg-slate-100 p-1 rounded-xl",children:[e.jsxs("button",{onClick:()=>p("timeline"),className:`flex-1 py-3 px-4 rounded-lg font-medium text-sm transition-all ${n==="timeline"?"bg-white shadow-sm text-emerald-600":"text-slate-600 hover:text-slate-900"}`,children:[e.jsx(I,{className:"w-4 h-4 inline mr-2"}),"Suivi"]}),e.jsxs("button",{onClick:()=>p("messages"),className:`flex-1 py-3 px-4 rounded-lg font-medium text-sm transition-all ${n==="messages"?"bg-white shadow-sm text-emerald-600":"text-slate-600 hover:text-slate-900"}`,children:[e.jsx(b,{className:"w-4 h-4 inline mr-2"}),"Messages",i.length>0&&e.jsx("span",{className:"ml-2 bg-emerald-100 text-emerald-700 px-2 py-0.5 rounded-full text-xs",children:i.length})]}),_&&e.jsxs("button",{onClick:()=>p("manifeste"),className:`flex-1 py-3 px-4 rounded-lg font-medium text-sm transition-all ${n==="manifeste"?"bg-white shadow-sm text-emerald-600":"text-slate-600 hover:text-slate-900"}`,children:[e.jsx(U,{className:"w-4 h-4 inline mr-2"}),"Manifeste"]})]}),e.jsxs("div",{className:"space-y-6",children:[n==="timeline"&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"bg-white rounded-2xl shadow-sm border border-slate-200 p-6",children:[e.jsx("h2",{className:"text-lg font-bold text-slate-900 mb-6",children:"Progression de votre echange"}),e.jsx("div",{className:"relative",children:N.map((s,a)=>e.jsxs("div",{className:"flex gap-4 pb-8 last:pb-0",children:[a<N.length-1&&e.jsx("div",{className:`absolute left-5 top-10 w-0.5 h-16 ${s.status==="completed"?"bg-emerald-500":s.status==="error"?"bg-red-500":"bg-slate-200"}`,style:{marginTop:`${a*88}px`}}),e.jsx("div",{className:`relative z-10 w-10 h-10 rounded-full flex items-center justify-center flex-shrink-0 ${s.status==="completed"?"bg-emerald-500 text-white":s.status==="current"?"bg-emerald-100 text-emerald-600 ring-4 ring-emerald-50":s.status==="error"?"bg-red-500 text-white":"bg-slate-100 text-slate-400"}`,children:s.status==="completed"?e.jsx($,{className:"w-5 h-5"}):s.status==="error"?e.jsx(q,{className:"w-5 h-5"}):s.status==="current"?e.jsx("div",{className:"w-3 h-3 bg-emerald-500 rounded-full animate-pulse"}):e.jsx("div",{className:"w-3 h-3 bg-slate-300 rounded-full"})}),e.jsxs("div",{className:"flex-1 pt-1",children:[e.jsx("h3",{className:`font-semibold ${s.status==="completed"||s.status==="current"?"text-slate-900":s.status==="error"?"text-red-600":"text-slate-400"}`,children:s.label}),e.jsx("p",{className:"text-sm text-slate-500 mt-1",children:s.description}),s.date&&e.jsx("p",{className:"text-xs text-slate-400 mt-1",children:new Date(s.date).toLocaleDateString("fr-FR",{day:"numeric",month:"long",hour:"2-digit",minute:"2-digit"})})]})]},s.id))})]}),e.jsxs("div",{className:"grid md:grid-cols-2 gap-4",children:[e.jsxs("div",{className:"bg-white rounded-2xl shadow-sm border border-slate-200 p-5",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[e.jsx("div",{className:"w-10 h-10 bg-blue-100 rounded-full flex items-center justify-center",children:e.jsx(G,{className:"w-5 h-5 text-blue-600"})}),e.jsx("h3",{className:"font-semibold text-slate-900",children:"Ramassage"})]}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-sm text-slate-500",children:"Date prevue"}),e.jsx("span",{className:"font-medium text-slate-900",children:t.pickup_scheduled_date?new Date(t.pickup_scheduled_date).toLocaleDateString("fr-FR"):"A programmer"})]}),r&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-sm text-slate-500",children:"Livreur"}),e.jsx("span",{className:"font-medium text-slate-900",children:r.name})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-sm text-slate-500",children:"Contact"}),e.jsx("a",{href:`tel:${r.phone}`,className:"font-medium text-blue-600",children:r.phone})]})]}),e.jsx("div",{className:"pt-2 border-t border-slate-100",children:e.jsx("div",{className:`inline-flex items-center gap-2 px-3 py-1.5 rounded-full text-sm font-medium ${t.status==="in_transit"||t.status==="completed"?"bg-emerald-100 text-emerald-700":"bg-amber-100 text-amber-700"}`,children:t.status==="in_transit"||t.status==="completed"?e.jsxs(e.Fragment,{children:[e.jsx(o,{className:"w-4 h-4"}),"Ramassage effectue"]}):e.jsxs(e.Fragment,{children:[e.jsx(m,{className:"w-4 h-4"}),"En attente"]})})})]})]}),e.jsxs("div",{className:"bg-white rounded-2xl shadow-sm border border-slate-200 p-5",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[e.jsx("div",{className:"w-10 h-10 bg-green-100 rounded-full flex items-center justify-center",children:e.jsx(V,{className:"w-5 h-5 text-green-600"})}),e.jsx("h3",{className:"font-semibold text-slate-900",children:"Paiement"})]}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-sm text-slate-500",children:"Montant"}),e.jsx("span",{className:`font-bold text-lg ${t.payment_amount>0?"text-slate-900":"text-emerald-600"}`,children:t.payment_amount>0?`${t.payment_amount} TND`:"GRATUIT"})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-sm text-slate-500",children:"Type"}),e.jsx("span",{className:`px-2 py-1 rounded text-xs font-medium ${t.payment_status==="free"?"bg-emerald-100 text-emerald-700":"bg-blue-100 text-blue-700"}`,children:t.payment_status==="free"?"Echange gratuit":"Avec supplement"})]}),e.jsx("div",{className:"pt-2 border-t border-slate-100",children:e.jsx("div",{className:`inline-flex items-center gap-2 px-3 py-1.5 rounded-full text-sm font-medium ${t.payment_status==="collected"?"bg-emerald-100 text-emerald-700":t.payment_status==="free"?"bg-slate-100 text-slate-600":"bg-amber-100 text-amber-700"}`,children:t.payment_status==="collected"?e.jsxs(e.Fragment,{children:[e.jsx(o,{className:"w-4 h-4"}),"Paiement encaisse"]}):t.payment_status==="free"?e.jsxs(e.Fragment,{children:[e.jsx($,{className:"w-4 h-4"}),"Aucun paiement requis"]}):e.jsxs(e.Fragment,{children:[e.jsx(m,{className:"w-4 h-4"}),"A payer a la livraison"]})})})]})]})]}),(t.return_product_status||t.status==="completed")&&e.jsxs("div",{className:`bg-white rounded-2xl shadow-sm border-2 p-5 ${t.return_product_status==="accepted"?"border-emerald-200":t.return_product_status==="rejected"?"border-red-200":t.return_product_status==="problem"?"border-orange-200":"border-slate-200"}`,children:[e.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[e.jsx("div",{className:`w-10 h-10 rounded-full flex items-center justify-center ${t.return_product_status==="accepted"?"bg-emerald-100":t.return_product_status==="rejected"?"bg-red-100":t.return_product_status==="problem"?"bg-orange-100":"bg-amber-100"}`,children:e.jsx(h,{className:`w-5 h-5 ${t.return_product_status==="accepted"?"text-emerald-600":t.return_product_status==="rejected"?"text-red-600":t.return_product_status==="problem"?"text-orange-600":"text-amber-600"}`})}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-semibold text-slate-900",children:"Produit retourne"}),e.jsx("p",{className:"text-sm text-slate-500",children:"Statut de verification par le livreur"})]})]}),e.jsx("div",{className:`p-4 rounded-xl ${t.return_product_status==="accepted"?"bg-emerald-50":t.return_product_status==="rejected"?"bg-red-50":t.return_product_status==="problem"?"bg-orange-50":"bg-amber-50"}`,children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(h,{className:`w-8 h-8 ${t.return_product_status==="accepted"?"text-emerald-600":t.return_product_status==="rejected"?"text-red-600":t.return_product_status==="problem"?"text-orange-600":"text-amber-600"}`}),e.jsxs("div",{children:[e.jsx("p",{className:`font-bold text-lg ${t.return_product_status==="accepted"?"text-emerald-700":t.return_product_status==="rejected"?"text-red-700":t.return_product_status==="problem"?"text-orange-700":"text-amber-700"}`,children:u.label}),t.return_product_notes&&e.jsx("p",{className:"text-sm text-slate-600 mt-1",children:t.return_product_notes})]})]})}),t.return_product_photos&&t.return_product_photos.length>0&&e.jsxs("div",{className:"mt-4",children:[e.jsxs("p",{className:"text-sm font-medium text-slate-700 mb-2 flex items-center gap-2",children:[e.jsx(W,{className:"w-4 h-4"}),"Photos du produit retourne"]}),e.jsx("div",{className:"grid grid-cols-3 gap-2",children:t.return_product_photos.map((s,a)=>e.jsx("img",{src:s,alt:`Photo ${a+1}`,className:"w-full aspect-square object-cover rounded-lg border border-slate-200",onClick:()=>window.open(s,"_blank")},a))})]})]})]}),n==="messages"&&e.jsxs("div",{className:"bg-white rounded-2xl shadow-sm border border-slate-200 p-6",children:[e.jsx("h2",{className:"text-lg font-bold text-slate-900 mb-4",children:"Messages avec le marchand"}),e.jsx("div",{className:"space-y-4 mb-4 max-h-96 overflow-y-auto",children:i.length===0?e.jsxs("div",{className:"text-center py-12",children:[e.jsx(b,{className:"w-12 h-12 text-slate-300 mx-auto mb-3"}),e.jsx("p",{className:"text-slate-500",children:"Aucun message pour le moment"}),e.jsx("p",{className:"text-sm text-slate-400 mt-1",children:"Envoyez un message pour communiquer avec le marchand"})]}):i.map(s=>e.jsxs("div",{className:`p-4 rounded-xl max-w-[80%] ${s.sender_type==="client"?"bg-emerald-500 text-white ml-auto":"bg-slate-100 text-slate-900 mr-auto"}`,children:[e.jsx("p",{className:"text-sm font-medium mb-1 opacity-80",children:s.sender_type==="client"?"Vous":"Marchand"}),e.jsx("p",{children:s.message}),e.jsx("p",{className:`text-xs mt-2 ${s.sender_type==="client"?"text-emerald-100":"text-slate-500"}`,children:new Date(s.created_at).toLocaleString("fr-FR")})]},s.id))}),e.jsxs("form",{onSubmit:k,className:"flex gap-2",children:[e.jsx("input",{type:"text",value:x,onChange:s=>f(s.target.value),placeholder:"Votre message...",className:"flex-1 px-4 py-3 border border-slate-300 rounded-xl focus:ring-2 focus:ring-emerald-500 focus:border-emerald-500"}),e.jsx("button",{type:"submit",className:"px-5 py-3 bg-emerald-600 text-white rounded-xl hover:bg-emerald-700 transition-colors",children:e.jsx(b,{className:"w-5 h-5"})})]})]}),n==="manifeste"&&_&&e.jsxs("div",{className:"bg-white rounded-2xl shadow-sm border border-slate-200 p-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-lg font-bold text-slate-900",children:"Manifeste d'Echange"}),e.jsx("p",{className:"text-sm text-slate-500",children:"Recu officiel de votre echange"})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsxs("button",{onClick:v,className:"flex items-center gap-2 px-4 py-2 bg-slate-100 hover:bg-slate-200 text-slate-700 rounded-lg transition-colors",children:[e.jsx(O,{className:"w-4 h-4"}),"Imprimer"]}),e.jsxs("button",{onClick:v,className:"flex items-center gap-2 px-4 py-2 bg-emerald-600 hover:bg-emerald-700 text-white rounded-lg transition-colors",children:[e.jsx(X,{className:"w-4 h-4"}),"Telecharger"]})]})]}),e.jsxs("div",{className:"border-2 border-slate-200 rounded-xl p-6 bg-slate-50",children:[e.jsxs("div",{className:"text-center border-b-2 border-slate-300 pb-4 mb-6",children:[e.jsx("h3",{className:"text-2xl font-bold tracking-wider",children:"SWAPP"}),e.jsx("p",{className:"text-sm text-slate-600 mt-1",children:"MANIFESTE D'ECHANGE"}),e.jsx("p",{className:"font-mono text-lg font-bold mt-2",children:t.exchange_code})]}),e.jsxs("div",{className:"mb-6",children:[e.jsx("h4",{className:"text-sm font-semibold text-slate-500 uppercase mb-3",children:"Informations Client"}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(B,{className:"w-4 h-4 text-slate-400"}),e.jsx("span",{className:"text-slate-900",children:t.client_name})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(H,{className:"w-4 h-4 text-slate-400"}),e.jsx("span",{className:"text-slate-900",children:t.client_phone})]}),e.jsxs("div",{className:"flex items-center gap-2 col-span-2",children:[e.jsx(J,{className:"w-4 h-4 text-slate-400"}),e.jsxs("span",{className:"text-slate-900",children:[t.client_address||"Adresse non fournie",","," ",t.client_city]})]})]})]}),e.jsxs("div",{className:"mb-6",children:[e.jsx("h4",{className:"text-sm font-semibold text-slate-500 uppercase mb-3",children:"Details de l'Echange"}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-slate-500",children:"Produit"}),e.jsx("p",{className:"font-medium text-slate-900",children:t.product_name||"Non specifie"})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-slate-500",children:"Raison"}),e.jsx("p",{className:"font-medium text-slate-900",children:t.reason})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-slate-500",children:"Date de demande"}),e.jsx("p",{className:"font-medium text-slate-900",children:new Date(t.created_at).toLocaleDateString("fr-FR")})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-slate-500",children:"Date d'echange"}),e.jsx("p",{className:"font-medium text-slate-900",children:t.completed_at?new Date(t.completed_at).toLocaleDateString("fr-FR"):"En cours"})]})]})]}),e.jsxs("div",{className:`p-4 rounded-xl mb-6 ${t.return_product_status==="accepted"?"bg-emerald-100 border-2 border-emerald-300":t.return_product_status==="rejected"?"bg-red-100 border-2 border-red-300":t.return_product_status==="problem"?"bg-orange-100 border-2 border-orange-300":"bg-amber-100 border-2 border-amber-300"}`,children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-semibold text-slate-600",children:"Statut du produit retourne"}),e.jsx("p",{className:`text-xl font-bold ${t.return_product_status==="accepted"?"text-emerald-700":t.return_product_status==="rejected"?"text-red-700":t.return_product_status==="problem"?"text-orange-700":"text-amber-700"}`,children:u.label.toUpperCase()})]}),e.jsx(h,{className:`w-10 h-10 ${t.return_product_status==="accepted"?"text-emerald-600":t.return_product_status==="rejected"?"text-red-600":t.return_product_status==="problem"?"text-orange-600":"text-amber-600"}`})]}),t.return_product_notes&&e.jsxs("p",{className:"text-sm text-slate-600 mt-2 border-t border-slate-300 pt-2",children:["Note: ",t.return_product_notes]})]}),e.jsx("div",{className:"p-4 bg-white rounded-xl border border-slate-200 mb-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-slate-500",children:"Montant"}),e.jsx("p",{className:"text-2xl font-bold text-slate-900",children:t.payment_amount>0?`${t.payment_amount} TND`:"GRATUIT"})]}),e.jsx("div",{className:`px-4 py-2 rounded-lg font-semibold ${t.payment_status==="collected"?"bg-emerald-100 text-emerald-700":t.payment_status==="free"?"bg-slate-100 text-slate-600":"bg-amber-100 text-amber-700"}`,children:t.payment_status==="collected"?"ENCAISSE":t.payment_status==="free"?"GRATUIT":"EN ATTENTE"})]})}),e.jsxs("div",{className:"text-center text-xs text-slate-500 border-t border-slate-200 pt-4",children:[e.jsx("p",{children:"SWAPP - Plateforme d'echange"}),e.jsxs("p",{children:["Document genere le ",new Date().toLocaleDateString("fr-FR")," ","a ",new Date().toLocaleTimeString("fr-FR")]})]})]})]})]})]})})}export{fe as default};
