import{s as v,j as e}from"./index-CnPrzfKa.js";import{u as N,r as i,L as n}from"./react-vendor-CTUriZ5h.js";import{C as m}from"./ClientLayout-DWZVpT6u.js";import{F as w}from"./filter-Cp7rfch8.js";import{P as c}from"./package-ChDCFdB3.js";import{C}from"./chevron-right-DAoz1ith.js";import{A as y}from"./alert-circle-_Iqic_ih.js";import{X as E}from"./x-circle-D3f66Y07.js";import{C as x}from"./check-circle-CyNeZd0p.js";import{T as k}from"./truck-CgEV9F53.js";import{C as L}from"./clock-Dhxn45-3.js";import"./supabase-Bl4YWSQ9.js";import"./x-D4qrk5Qy.js";import"./createLucideIcon-CMjKDoEE.js";import"./menu-DP2azNEK.js";import"./scan-line-Dhzz-_Ia.js";import"./home-9mW_oZwz.js";import"./message-square-B53yKzw3.js";function J(){N();const[a,h]=i.useState([]),[u,p]=i.useState(!0),[s,o]=i.useState("all");i.useEffect(()=>{b()},[]);const b=async()=>{try{const{data:t}=await v.from("exchanges").select("*").order("created_at",{ascending:!1});h(t||[])}catch(t){console.error("Error fetching exchanges:",t)}finally{p(!1)}},g=t=>{switch(t){case"pending":return{color:"bg-amber-50 text-amber-700 border-amber-200",icon:L,label:"En attente de validation",description:"Le marchand examine votre demande"};case"validated":return{color:"bg-blue-50 text-blue-700 border-blue-200",icon:x,label:"Validé",description:"Votre échange est approuvé"};case"preparing":return{color:"bg-purple-50 text-purple-700 border-purple-200",icon:c,label:"En préparation",description:"Le nouveau produit est en cours de préparation"};case"in_transit":return{color:"bg-indigo-50 text-indigo-700 border-indigo-200",icon:k,label:"En transit",description:"Le colis est en route"};case"completed":return{color:"bg-emerald-50 text-emerald-700 border-emerald-200",icon:x,label:"Terminé",description:"Échange complété avec succès"};case"rejected":return{color:"bg-red-50 text-red-700 border-red-200",icon:E,label:"Refusé",description:"Le marchand a refusé la demande"};default:return{color:"bg-slate-50 text-slate-700 border-slate-200",icon:y,label:t,description:""}}},f=a.filter(t=>s==="all"?!0:s==="active"?!["completed","rejected"].includes(t.status):s==="completed"?t.status==="completed":!0),r={total:a.length,active:a.filter(t=>!["completed","rejected"].includes(t.status)).length,completed:a.filter(t=>t.status==="completed").length};return u?e.jsx(m,{children:e.jsx("div",{className:"flex items-center justify-center h-96",children:e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-emerald-600"})})}):e.jsx(m,{children:e.jsxs("div",{className:"max-w-5xl mx-auto",children:[e.jsxs("div",{className:"mb-8",children:[e.jsx("h1",{className:"text-3xl font-bold text-slate-900 mb-2",children:"Mes Échanges"}),e.jsx("p",{className:"text-slate-600",children:"Suivez vos demandes d'échange en temps réel"})]}),e.jsxs("div",{className:"grid grid-cols-3 gap-4 mb-6",children:[e.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-slate-200 p-4",children:[e.jsx("div",{className:"text-sm text-slate-600 mb-1",children:"Total"}),e.jsx("div",{className:"text-2xl font-bold text-slate-900",children:r.total})]}),e.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-slate-200 p-4",children:[e.jsx("div",{className:"text-sm text-slate-600 mb-1",children:"En cours"}),e.jsx("div",{className:"text-2xl font-bold text-blue-600",children:r.active})]}),e.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-slate-200 p-4",children:[e.jsx("div",{className:"text-sm text-slate-600 mb-1",children:"Terminés"}),e.jsx("div",{className:"text-2xl font-bold text-emerald-600",children:r.completed})]})]}),e.jsx("div",{className:"bg-white rounded-xl shadow-sm border border-slate-200 p-4 mb-6",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(w,{className:"w-4 h-4 text-slate-500"}),e.jsx("span",{className:"text-sm font-medium text-slate-700",children:"Filtrer:"}),e.jsxs("div",{className:"flex gap-2",children:[e.jsxs("button",{onClick:()=>o("all"),className:`px-3 py-1 text-sm rounded-lg transition-colors ${s==="all"?"bg-emerald-100 text-emerald-700 font-medium":"text-slate-600 hover:bg-slate-100"}`,children:["Tous (",r.total,")"]}),e.jsxs("button",{onClick:()=>o("active"),className:`px-3 py-1 text-sm rounded-lg transition-colors ${s==="active"?"bg-emerald-100 text-emerald-700 font-medium":"text-slate-600 hover:bg-slate-100"}`,children:["En cours (",r.active,")"]}),e.jsxs("button",{onClick:()=>o("completed"),className:`px-3 py-1 text-sm rounded-lg transition-colors ${s==="completed"?"bg-emerald-100 text-emerald-700 font-medium":"text-slate-600 hover:bg-slate-100"}`,children:["Terminés (",r.completed,")"]})]})]})}),a.length===0?e.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-slate-200 p-12 text-center",children:[e.jsx("div",{className:"w-16 h-16 bg-slate-100 rounded-full flex items-center justify-center mx-auto mb-4",children:e.jsx(c,{className:"w-8 h-8 text-slate-400"})}),e.jsx("h3",{className:"text-lg font-semibold text-slate-900 mb-2",children:"Aucun échange"}),e.jsx("p",{className:"text-slate-600 mb-6",children:"Vous n'avez pas encore créé de demande d'échange"}),e.jsxs(n,{to:"/client/scan",className:"inline-flex items-center px-6 py-3 bg-emerald-600 text-white rounded-lg hover:bg-emerald-700 transition-colors font-medium",children:[e.jsx(c,{className:"w-5 h-5 mr-2"}),"Créer un échange"]})]}):e.jsx("div",{className:"space-y-3",children:f.map(t=>{const l=g(t.status),j=l.icon,d=Math.floor((Date.now()-new Date(t.created_at).getTime())/(1e3*60*60*24));return e.jsx(n,{to:`/client/tracking/${t.exchange_code}`,className:"block bg-white rounded-xl shadow-sm border border-slate-200 hover:shadow-md hover:border-emerald-200 transition-all p-5 group",children:e.jsxs("div",{className:"flex items-start justify-between gap-4",children:[e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-3",children:[e.jsx("div",{className:`p-2 rounded-lg border ${l.color}`,children:e.jsx(j,{className:"w-5 h-5"})}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[e.jsx("h3",{className:"font-semibold text-slate-900 text-lg",children:t.exchange_code}),e.jsx("span",{className:`px-2 py-0.5 rounded-full text-xs font-medium border ${l.color}`,children:l.label})]}),e.jsx("p",{className:"text-sm text-slate-600",children:l.description})]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4 pl-14",children:[e.jsxs("div",{children:[e.jsx("div",{className:"text-xs text-slate-500 mb-0.5",children:"Motif"}),e.jsx("div",{className:"text-sm font-medium text-slate-900 truncate",children:t.reason})]}),e.jsxs("div",{children:[e.jsx("div",{className:"text-xs text-slate-500 mb-0.5",children:"Date"}),e.jsx("div",{className:"text-sm font-medium text-slate-900",children:d===0?"Aujourd'hui":d===1?"Hier":`Il y a ${d} jours`})]})]})]}),e.jsx(C,{className:"w-5 h-5 text-slate-400 group-hover:text-emerald-600 transition-colors flex-shrink-0 mt-2"})]})},t.id)})})]})})}export{J as default};
