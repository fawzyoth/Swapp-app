import{j as e,s as a}from"./index-zDZ3Lj_p.js";import{u as g,r as d}from"./react-vendor-CTUriZ5h.js";import{A as j}from"./arrow-left-CxjwE-xR.js";import{T as w}from"./truck-CgEV9F53.js";import"./supabase-Bl4YWSQ9.js";import"./createLucideIcon-CMjKDoEE.js";function S(){const o=g(),[c,u]=d.useState(""),[x,b]=d.useState(""),[m,i]=d.useState(!1),[h,l]=d.useState(""),p=async r=>{r.preventDefault(),i(!0),l("");try{const{data:s,error:t}=await a.auth.signInWithPassword({email:c,password:x});if(t)throw t;if(s.user){const{data:n,error:v}=await a.from("delivery_persons").select("*").eq("id",s.user.id).maybeSingle();if(v||!n)throw await a.auth.signOut(),new Error("Compte livreur non trouvé");o("/delivery/dashboard")}}catch(s){l(s.message||"Erreur de connexion")}finally{i(!1)}},f=async()=>{u("demo@livreur.com"),b("demo123456"),i(!0),l("");try{let{data:r,error:s}=await a.auth.signInWithPassword({email:"demo@livreur.com",password:"demo123456"});if(s&&s.message.includes("Invalid login credentials")){const{data:t,error:n}=await a.auth.signUp({email:"demo@livreur.com",password:"demo123456",options:{data:{name:"Livreur Demo",phone:"+216 70 000 001"}}});if(n)throw n;if(t.user){await a.from("delivery_persons").insert({id:t.user.id,email:"demo@livreur.com",name:"Livreur Demo",phone:"+216 70 000 001"}),o("/delivery/dashboard");return}}else if(s)throw s;r!=null&&r.user&&o("/delivery/dashboard")}catch(r){l(r.message||"Erreur de connexion. Veuillez créer le compte via Supabase Dashboard.")}finally{i(!1)}};return e.jsx("div",{className:"min-h-screen bg-gradient-to-br from-amber-50 via-white to-orange-50",children:e.jsxs("div",{className:"container mx-auto px-4 py-8",children:[e.jsxs("button",{onClick:()=>o("/"),className:"flex items-center text-slate-600 hover:text-slate-900 mb-6",children:[e.jsx(j,{className:"w-5 h-5 mr-2"}),"Retour à l'accueil"]}),e.jsxs("div",{className:"max-w-md mx-auto",children:[e.jsxs("div",{className:"text-center mb-8",children:[e.jsx("div",{className:"inline-flex items-center justify-center w-16 h-16 bg-amber-100 rounded-full mb-4",children:e.jsx(w,{className:"w-8 h-8 text-amber-600"})}),e.jsx("h1",{className:"text-3xl font-bold text-slate-900 mb-2",children:"Connexion Livreur"}),e.jsx("p",{className:"text-slate-600",children:"Accédez à votre espace de vérification"})]}),e.jsxs("div",{className:"bg-white rounded-xl shadow-lg p-6",children:[h&&e.jsx("div",{className:"mb-4 p-4 bg-red-50 border border-red-200 rounded-lg text-red-700 text-sm",children:h}),e.jsxs("form",{onSubmit:p,className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-2",children:"Email"}),e.jsx("input",{type:"email",required:!0,value:c,onChange:r=>u(r.target.value),placeholder:"votre@email.com",className:"w-full px-4 py-3 border border-slate-300 rounded-lg focus:ring-2 focus:ring-amber-500 focus:border-amber-500"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-2",children:"Mot de passe"}),e.jsx("input",{type:"password",required:!0,value:x,onChange:r=>b(r.target.value),placeholder:"••••••••",className:"w-full px-4 py-3 border border-slate-300 rounded-lg focus:ring-2 focus:ring-amber-500 focus:border-amber-500"})]}),e.jsx("button",{type:"submit",disabled:m,className:"w-full py-3 bg-amber-600 hover:bg-amber-700 disabled:bg-slate-300 text-white rounded-lg font-medium transition-colors",children:m?"Connexion...":"Se connecter"})]}),e.jsxs("div",{className:"mt-4",children:[e.jsxs("div",{className:"relative",children:[e.jsx("div",{className:"absolute inset-0 flex items-center",children:e.jsx("div",{className:"w-full border-t border-slate-300"})}),e.jsx("div",{className:"relative flex justify-center text-sm",children:e.jsx("span",{className:"px-2 bg-white text-slate-500",children:"ou"})})]}),e.jsx("button",{onClick:f,disabled:m,className:"w-full mt-4 py-3 bg-slate-100 hover:bg-slate-200 text-slate-700 rounded-lg font-medium transition-colors",children:"Connexion Demo"})]}),e.jsxs("div",{className:"mt-6 p-4 bg-amber-50 rounded-lg",children:[e.jsx("p",{className:"text-sm text-amber-800 font-medium mb-2",children:"Compte de démonstration:"}),e.jsxs("p",{className:"text-xs text-amber-700",children:["Email: demo@livreur.com",e.jsx("br",{}),"Mot de passe: demo123456"]})]})]})]})]})})}export{S as default};
