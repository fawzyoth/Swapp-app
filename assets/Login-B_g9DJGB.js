import{j as e,s as r}from"./index-zDZ3Lj_p.js";import{u as v,r as i}from"./react-vendor-CTUriZ5h.js";import{A as w}from"./arrow-left-CxjwE-xR.js";import{S as y}from"./store-B-5iV_wL.js";import"./supabase-Bl4YWSQ9.js";import"./createLucideIcon-CMjKDoEE.js";function q(){const o=v(),[m,c]=i.useState(""),[u,x]=i.useState(""),[d,l]=i.useState(!1),[h,n]=i.useState(""),p=async s=>{s.preventDefault(),l(!0),n("");try{const{data:t,error:a}=await r.auth.signInWithPassword({email:m,password:u});if(a)throw a;t.user&&o("/merchant/dashboard")}catch(t){n(t.message||"Erreur de connexion")}finally{l(!1)}},f=async()=>{c("demo@merchant.com"),x("demo123456"),l(!0),n("");try{let{data:s,error:t}=await r.auth.signInWithPassword({email:"demo@merchant.com",password:"demo123456"});if(t&&t.message.includes("Invalid login credentials")){const{data:a,error:b}=await r.auth.signUp({email:"demo@merchant.com",password:"demo123456",options:{data:{name:"Boutique Demo",phone:"+216 70 000 000"}}});if(b)throw b;if(a.user){const g="11111111-1111-1111-1111-111111111111",{error:j}=await r.from("merchants").update({id:a.user.id}).eq("id",g);j&&await r.from("merchants").insert({id:a.user.id,email:"demo@merchant.com",name:"Boutique Demo",phone:"+216 70 000 000"}),o("/merchant/dashboard");return}}else if(t)throw t;s!=null&&s.user&&o("/merchant/dashboard")}catch(s){n(s.message||"Erreur de connexion. Veuillez créer le compte via Supabase Dashboard.")}finally{l(!1)}};return e.jsx("div",{className:"min-h-screen bg-gradient-to-br from-sky-50 via-white to-emerald-50",children:e.jsxs("div",{className:"container mx-auto px-4 py-8",children:[e.jsxs("button",{onClick:()=>o("/"),className:"flex items-center text-slate-600 hover:text-slate-900 mb-6",children:[e.jsx(w,{className:"w-5 h-5 mr-2"}),"Retour à l'accueil"]}),e.jsxs("div",{className:"max-w-md mx-auto",children:[e.jsxs("div",{className:"text-center mb-8",children:[e.jsx("div",{className:"inline-flex items-center justify-center w-16 h-16 bg-sky-100 rounded-full mb-4",children:e.jsx(y,{className:"w-8 h-8 text-sky-600"})}),e.jsx("h1",{className:"text-3xl font-bold text-slate-900 mb-2",children:"Connexion E-Commerçant"}),e.jsx("p",{className:"text-slate-600",children:"Accédez à votre tableau de bord"})]}),e.jsxs("div",{className:"bg-white rounded-xl shadow-lg p-6",children:[h&&e.jsx("div",{className:"mb-4 p-4 bg-red-50 border border-red-200 rounded-lg text-red-700 text-sm",children:h}),e.jsxs("form",{onSubmit:p,className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-2",children:"Email"}),e.jsx("input",{type:"email",required:!0,value:m,onChange:s=>c(s.target.value),placeholder:"votre@email.com",className:"w-full px-4 py-3 border border-slate-300 rounded-lg focus:ring-2 focus:ring-sky-500 focus:border-sky-500"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-2",children:"Mot de passe"}),e.jsx("input",{type:"password",required:!0,value:u,onChange:s=>x(s.target.value),placeholder:"••••••••",className:"w-full px-4 py-3 border border-slate-300 rounded-lg focus:ring-2 focus:ring-sky-500 focus:border-sky-500"})]}),e.jsx("button",{type:"submit",disabled:d,className:"w-full py-3 bg-sky-600 hover:bg-sky-700 disabled:bg-slate-300 text-white rounded-lg font-medium transition-colors",children:d?"Connexion...":"Se connecter"})]}),e.jsxs("div",{className:"mt-4",children:[e.jsxs("div",{className:"relative",children:[e.jsx("div",{className:"absolute inset-0 flex items-center",children:e.jsx("div",{className:"w-full border-t border-slate-300"})}),e.jsx("div",{className:"relative flex justify-center text-sm",children:e.jsx("span",{className:"px-2 bg-white text-slate-500",children:"ou"})})]}),e.jsx("button",{onClick:f,disabled:d,className:"w-full mt-4 py-3 bg-slate-100 hover:bg-slate-200 text-slate-700 rounded-lg font-medium transition-colors",children:"Connexion Demo"})]}),e.jsxs("div",{className:"mt-6 p-4 bg-sky-50 rounded-lg",children:[e.jsx("p",{className:"text-sm text-sky-800 font-medium mb-2",children:"Compte de démonstration:"}),e.jsxs("p",{className:"text-xs text-sky-700",children:["Email: demo@merchant.com",e.jsx("br",{}),"Mot de passe: demo123456"]})]})]})]})]})})}export{q as default};
