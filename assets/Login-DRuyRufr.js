import{r as t,j as e,s as a}from"./index-CQ_LRKqG.js";import{A as g}from"./arrow-left-BXzShBGO.js";import{T as v}from"./truck-Cnf3_ycc.js";import"./createLucideIcon-_6ROX8yg.js";function E(){const[o,u]=t.useState(""),[l,x]=t.useState(""),[i,n]=t.useState(!1),[d,c]=t.useState(""),b=async r=>{r.preventDefault(),n(!0),c("");try{const{data:s,error:m}=await a.auth.signInWithPassword({email:o.trim().toLowerCase(),password:l});if(m)throw m;if(s.user){const{data:f,error:p}=await a.from("delivery_persons").select("id").eq("email",s.user.email).maybeSingle();if(p||!f)throw await a.auth.signOut(),new Error("Compte livreur non trouvé.");window.location.href="#/delivery/dashboard"}}catch(s){c(s.message||"Erreur de connexion")}finally{n(!1)}},h=()=>{window.location.href="#/"};return e.jsx("div",{className:"min-h-screen bg-gradient-to-br from-amber-50 via-white to-orange-50",children:e.jsxs("div",{className:"container mx-auto px-4 py-8",children:[e.jsxs("button",{onClick:h,className:"flex items-center text-slate-600 hover:text-slate-900 mb-6",children:[e.jsx(g,{className:"w-5 h-5 mr-2"}),"Retour à l'accueil"]}),e.jsxs("div",{className:"max-w-md mx-auto",children:[e.jsxs("div",{className:"text-center mb-8",children:[e.jsx("div",{className:"inline-flex items-center justify-center w-16 h-16 bg-amber-100 rounded-full mb-4",children:e.jsx(v,{className:"w-8 h-8 text-amber-600"})}),e.jsx("h1",{className:"text-3xl font-bold text-slate-900 mb-2",children:"Connexion Livreur"}),e.jsx("p",{className:"text-slate-600",children:"Accédez à votre espace de vérification"})]}),e.jsxs("div",{className:"bg-white rounded-xl shadow-lg p-6",children:[d&&e.jsx("div",{className:"mb-4 p-4 bg-red-50 border border-red-200 rounded-lg text-red-700 text-sm",children:d}),e.jsxs("form",{onSubmit:b,className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-2",children:"Email"}),e.jsx("input",{type:"email",required:!0,value:o,onChange:r=>u(r.target.value),placeholder:"votre@email.com",className:"w-full px-4 py-3 border border-slate-300 rounded-lg focus:ring-2 focus:ring-amber-500 focus:border-amber-500"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-2",children:"Mot de passe"}),e.jsx("input",{type:"password",required:!0,value:l,onChange:r=>x(r.target.value),placeholder:"••••••••",className:"w-full px-4 py-3 border border-slate-300 rounded-lg focus:ring-2 focus:ring-amber-500 focus:border-amber-500"})]}),e.jsx("button",{type:"submit",disabled:i,className:"w-full py-3 bg-amber-600 hover:bg-amber-700 disabled:bg-slate-300 text-white rounded-lg font-medium transition-colors",children:i?"Connexion...":"Se connecter"})]})]})]})]})})}export{E as default};
